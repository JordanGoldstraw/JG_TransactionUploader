@page
@model Frontend.Pages.FileUploaderModel
@{
    ViewData["Title"] = "File Uploader";
}
<div class="text-center">
    <div id="tabs">
        <ul class="tab-list">
            <li class="tab-item" onclick="showTab('tab1')">File Uploader</li>
            <li class="tab-item" onclick="showTab('tab2')">File List</li>
        </ul>
        <div id="tab1" class="tab-content">
            <h2>File Uploader</h2>
            <form method="post" enctype="multipart/form-data">
                <input type="file" id="fileInput" name="file" accept=".csv, .xml" />
                <button type="submit">Upload</button>
            </form>
            <p id="fileInfo">@Model.FileInfo</p>
        </div>
        <div id="tab2" class="tab-content">
            <h2>Transaction List</h2>
            <form method="post" asp-page-handler="FilterTransactions">
                <div>
                    <label for="currencyFilter">Currency:</label>
                    <select id="currencyFilter" name="SelectedCurrency" asp-for="SelectedCurrency" asp-items="Model.CurrencyOptions">
                        <option value="">Select Currency</option>
                    </select>
                </div>
                <div>
                    <label for="startDate">Start Date:</label>
                    <input type="date" id="startDate" name="StartDate" asp-for="StartDate" />
                </div>
                <div>
                    <label for="endDate">End Date:</label>
                    <input type="date" id="endDate" name="EndDate" asp-for="EndDate" />
                </div>
                <button type="submit">Filter</button>
            </form>
            <ul id="transactionList">
                @foreach (var transaction in Model.Transactions)
                {
                    <li>ID: @transaction.TransactionId, Date: @transaction.TransactionDate, Account: @transaction.AccountNo, Amount: @transaction.Amount, Currency: @transaction.CurrencyCode, Status: @transaction.Status</li>
                }
            </ul>
        </div>
    </div>
</div>
<script>
    function showTab(tabId) {
        document.querySelectorAll('.tab-content').forEach(tab => {
            tab.style.display = 'none';
        });
        document.getElementById(tabId).style.display = 'block';
    }

    showTab('tab1');
</script>
